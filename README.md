# üéÆ Pathly - Puzzle Game

**Versi√≥n**: 1.0.0  
**Estado**: ‚úÖ MVP Listo para Producci√≥n

Un juego de puzzle adictivo donde conectas n√∫meros en orden para completar cada nivel. Desarrollado con React Native y Expo.

## üöÄ Caracter√≠sticas

- **15 niveles progresivos** con dificultad creciente
- **Sistema de pistas** inteligente (primera gratis, adicionales con anuncios)
- **Monetizaci√≥n AdMob** integrada y optimizada
- **Progreso persistente** en la nube y local
- **UI/UX moderna** con dise√±o minimalista
- **Generador de niveles** con IA

## üõ†Ô∏è Stack Tecnol√≥gico

- **Frontend**: React Native + Expo (Managed Workflow)
- **Lenguaje**: TypeScript
- **Backend**: Firebase (Firestore + Auth con Email/Password)
- **Monetizaci√≥n**: Google AdMob
- **Generador**: Python API con IA

### ‚úÖ Funcionalidades Completadas
- üéÆ **Juego completo** con grid interactivo
- üó∫Ô∏è **Sistema de niveles** con progreso local
- üéØ **Sistema de pistas inteligente** con coordenadas corregidas
- üíæ **Persistencia de datos** con AsyncStorage
- üîê **Sistema de autenticaci√≥n** con email/contrase√±a y recuperaci√≥n
- üé® **UI/UX moderna** con paleta de colores definida
- üîß **Generador de niveles** en Python
- üì± **Multiplataforma** (Android, iOS, Web)
- üõ°Ô∏è **Validaciones robustas** y manejo de errores
- üé® **Logo oficial de Pathly Game** integrado
- üè† **Pantalla de inicio redise√±ada** con mejor UX
- üì± **Iconos personalizados** para Google Play

## üöÄ Stack Tecnol√≥gico

- **Framework**: React Native + Expo
- **Lenguaje**: TypeScript
- **Estilo**: Minimalista moderno con paleta de colores definida

## üé® Paleta de Colores

- **Primario**: Azul Puzzle `#3B82F6`
- **Neutro**: Gris Claro `#E5E7EB`
- **√âxito**: Verde Ne√≥n `#22C55E`

## üì¶ Instalaci√≥n

```bash
# Instalar dependencias
npm install

# Ejecutar en desarrollo
npm start

# Ejecutar en Android
npm run android

# Ejecutar en iOS
npm run ios

# Ejecutar en web
npm run web
```

## üöÄ Proceso de Release

### Verificaci√≥n Pre-Release
```bash
# Verificar que el proyecto est√° listo para release
./scripts/verify-release-readiness.sh
```

### Crear Release Autom√°tico
```bash
# Crear release completo (versi√≥n y version code)
./scripts/create-release.sh 1.0.2 11
```

### Proceso Manual
Para un control m√°s detallado, sigue la [Gu√≠a Completa de Release](RELEASE_GUIDE.md).

### üîê Configuraci√≥n de Keystore

Antes de crear releases, necesitas configurar tu keystore:

1. **Copiar el archivo de ejemplo**:
   ```bash
   cp android/app/keystore.properties.example android/app/keystore.properties
   ```

2. **Actualizar `android/app/keystore.properties`** con tus datos reales:
   ```properties
   storePassword=tu_password_keystore
   keyPassword=tu_password_key
   keyAlias=tu_alias_key
   storeFile=tu_archivo_keystore.jks
   ```

3. **Colocar tu archivo keystore** en `android/app/`

**‚ö†Ô∏è Nota de Seguridad**: ¬°Nunca subas `keystore.properties` o archivos keystore al control de versiones!

### Archivos de Release
Los releases se guardan en la carpeta `releases/` con la siguiente estructura:
```
releases/
‚îú‚îÄ‚îÄ v1.0.1/
‚îÇ   ‚îú‚îÄ‚îÄ Pathly-v1.0.1-release.aab    # Para Google Play Store
‚îÇ   ‚îú‚îÄ‚îÄ Pathly-v1.0.1-release.apk    # Para distribuci√≥n directa
‚îÇ   ‚îî‚îÄ‚îÄ RELEASE_NOTES.md             # Notas del release
‚îî‚îÄ‚îÄ v1.0.2/
    ‚îî‚îÄ‚îÄ ...
```

## üéÆ Pantallas del Juego

### üè† Pantalla Principal
- **Logo oficial de Pathly Game** prominente y centrado
- **Men√∫ principal** con bot√≥n de juego destacado
- **Informaci√≥n del juego** organizada en tarjetas
- **Dise√±o moderno** con sombras y efectos visuales
- **Navegaci√≥n** fluida entre pantallas

### üó∫Ô∏è Pantalla de Selecci√≥n de Niveles
- **Mapa visual** con isla y elementos decorativos
- **Barriles como niveles** con n√∫meros y estados
- **Ticks de completado** para niveles terminados
- **Carteles "Pr√≥ximamente"** para niveles bloqueados
- **Nivel actual** destacado con borde rojo
- **Caminos conectores** entre niveles
- **Progreso local** sincronizado con AsyncStorage
- **√öltimo nivel jugado** mostrado en el header

### üéØ Pantalla de Juego
- **Grid interactivo** espec√≠fico para cada nivel
- **Configuraciones √∫nicas** de n√∫meros por nivel
- **Validaci√≥n completa** del camino
- **Bot√≥n de completar** cuando el nivel est√° terminado
- **Progreso visual** del camino trazado
- **Guardado autom√°tico** del progreso al completar niveles
- **Indicador de nivel ya completado** anteriormente
- **Estad√≠sticas en tiempo real** de niveles completados

## üîê Sistema de Autenticaci√≥n

El juego incluye un sistema completo de autenticaci√≥n con Firebase Auth que permite a los usuarios crear cuentas, iniciar sesi√≥n y recuperar contrase√±as olvidadas.

### Caracter√≠sticas del Sistema

- **Registro de usuarios** con email y contrase√±a
- **Inicio de sesi√≥n** con validaci√≥n de credenciales
- **Recuperaci√≥n de contrase√±a** por email
- **Persistencia de sesi√≥n** autom√°tica
- **Sincronizaci√≥n de progreso** en la nube
- **Validaciones robustas** de seguridad

### Funciones Principales

```typescript
import {
  register,
  login,
  resetPassword,
  signOut,
  getCurrentUser,
  subscribeToAuthState,
} from './services/auth';

// Registrar nuevo usuario
const user = await register({
  email: 'usuario@ejemplo.com',
  password: 'contrase√±a123',
  displayName: 'Usuario Ejemplo'
});

// Iniciar sesi√≥n
const user = await login({
  email: 'usuario@ejemplo.com',
  password: 'contrase√±a123'
});

// Recuperar contrase√±a
await resetPassword('usuario@ejemplo.com');

// Cerrar sesi√≥n
await signOut();

// Obtener usuario actual
const currentUser = getCurrentUser();

// Suscribirse a cambios de autenticaci√≥n
const unsubscribe = subscribeToAuthState((state) => {
  console.log('Estado de auth:', state);
});
```

### Pol√≠ticas de Seguridad

- **Contrase√±as m√≠nimas**: 6 caracteres
- **Validaci√≥n de email**: Formato correcto requerido
- **L√≠mite de intentos**: Protecci√≥n contra ataques de fuerza bruta
- **Tokens seguros**: Firebase maneja la seguridad de tokens
- **Persistencia local**: Sesi√≥n mantenida hasta logout expl√≠cito

## üíæ Sistema de Progreso Local

El juego utiliza AsyncStorage para guardar el progreso del usuario localmente, con sincronizaci√≥n opcional a la nube cuando el usuario est√° autenticado.

### Funciones Principales

```typescript
import {
  markLevelCompleted,
  getLastLevelPlayed,
  isLevelCompleted,
  getCompletedLevelsCount,
} from './services';

// Marcar nivel como completado
await markLevelCompleted('level_123');

// Obtener √∫ltimo nivel jugado
const lastLevel = await getLastLevelPlayed();

// Verificar si un nivel est√° completado
const completed = await isLevelCompleted('level_123');

// Obtener estad√≠sticas
const count = await getCompletedLevelsCount();
```

### Caracter√≠sticas

- **Persistencia local**: Los datos se guardan en el dispositivo
- **Manejo de errores**: Recuperaci√≥n autom√°tica de datos corruptos
- **Sincronizaci√≥n**: Progreso actualizado en tiempo real
- **Compatibilidad**: Funciona con el sistema de niveles existente

## üéØ Sistema de Pistas Inteligente

El sistema de pistas analiza el camino actual del usuario y lo compara con la soluci√≥n correcta para proporcionar ayuda contextual.

### Caracter√≠sticas del Sistema

- **Comparaci√≥n inteligente**: Analiza paso a paso el camino vs la soluci√≥n
- **Pistas contextuales**: Diferentes tipos de ayuda seg√∫n el estado del juego
- **Efectos visuales**: Ilumina la celda sugerida con efectos especiales
- **Coordenadas corregidas**: Sistema robusto que maneja correctamente las coordenadas del grid

### Tipos de Pistas

1. **Sin camino**: Ilumina el n√∫mero 1 para empezar
2. **Camino correcto**: Ilumina la siguiente celda de la soluci√≥n
3. **Camino incorrecto**: Ilumina la √∫ltima celda correcta para retroceder

### Uso

```typescript
// El sistema se activa autom√°ticamente al presionar "üí° Pista"
<Grid 
  grid={gridData}
  solution={levelSolution}
  onHint={(hint) => console.log(hint)}
/>
```

## üß© Componente Grid

El componente `Grid` es el n√∫cleo del juego. Renderiza un tablero NxN interactivo que permite al usuario trazar caminos tocando celdas.

### Props

```typescript
interface GridProps {
  grid: Cell[][];           // Array bidimensional de celdas
  onPathChange?: (path: Cell[]) => void;  // Callback cuando cambia el camino
}

interface Cell {
  value: number | null;     // N√∫mero en la celda (null si est√° vac√≠a)
  x: number;                // Posici√≥n X en el grid
  y: number;                // Posici√≥n Y en el grid
}
```

### Uso B√°sico

```typescript
import Grid, { Cell } from './components/Grid';

// Crear un grid 5x5
const gridData: Cell[][] = [
  [
    { value: 1, x: 0, y: 0 },
    { value: null, x: 1, y: 0 },
    // ... m√°s celdas
  ],
  // ... m√°s filas
];

function GameScreen() {
  const handlePathChange = (path: Cell[]) => {
    console.log('Camino actual:', path);
  };

  return (
    <Grid 
      grid={gridData} 
      onPathChange={handlePathChange}
    />
  );
}
```

### Caracter√≠sticas

- ‚úÖ **Dibujo continuo**: Mant√©n presionado y arrastra para dibujar el camino
- ‚úÖ **Interactividad t√°ctil**: Toca celdas individuales o arrastra para trazar
- ‚úÖ **Visualizaci√≥n del camino**: L√≠neas azules conectan las celdas del camino (sin pintar celdas)
- ‚úÖ **N√∫meros siempre visibles**: Los n√∫meros se mantienen sobre el camino
- ‚úÖ **Punto de partida y final**: N√∫mero 1 (verde) y n√∫mero 4 (naranja) destacados
- ‚úÖ **Funci√≥n de retroceso**: Toca un punto anterior del camino para retroceder
- ‚úÖ **Bot√≥n de reinicio**: Reinicia el nivel completamente
- ‚úÖ **Sistema de pistas**: Analiza el camino y te dice d√≥nde est√° el error o la siguiente celda
- ‚úÖ **Validaci√≥n de adyacencia**: Solo permite conectar celdas adyacentes
- ‚úÖ **Experiencia m√≥vil optimizada**: PanResponder para gestos fluidos
- ‚úÖ **Responsive**: Se adapta al tama√±o de la pantalla
- ‚úÖ **Accesibilidad**: Botones grandes y contrastes adecuados

### Estructura de Datos

El grid se representa como un array bidimensional donde cada celda tiene:

- `value`: El n√∫mero que contiene (1, 2, 3, 4...) o `null` si est√° vac√≠a
- `x`, `y`: Coordenadas de posici√≥n en el grid

### Eventos

- `onPathChange`: Se ejecuta cada vez que el usuario modifica el camino trazado
- `onReset`: Se ejecuta cuando el usuario presiona el bot√≥n de reinicio
- `onHint`: Se ejecuta cuando el usuario solicita una pista
- El camino se mantiene como un array de celdas en orden de selecci√≥n

### Reglas de Juego

- **Punto de partida**: Debe comenzar en el n√∫mero 1 (celda verde)
- **Punto final**: Debe terminar en el n√∫mero 4 (celda naranja)
- **Conexi√≥n**: Solo se pueden conectar celdas adyacentes (horizontal o vertical)
- **Dibujo continuo**: Mant√©n presionado y arrastra para dibujar el camino
- **Retroceso**: Toca un punto anterior del camino para retroceder hasta ese punto
- **Reinicio**: Usa el bot√≥n "üîÑ Reiniciar" para empezar de nuevo
- **Pistas**: Usa el bot√≥n "üí° Pista" para obtener ayuda sobre errores o siguiente paso
- **N√∫meros visibles**: Los n√∫meros siempre se mantienen visibles sobre el camino
- **Completitud**: Debe usar TODAS las celdas del grid exactamente una vez
- **Orden correcto**: Los n√∫meros deben aparecer en orden 1‚Üí2‚Üí3‚Üí4 en el camino

## üéØ Objetivo del Juego

Conectar todos los n√∫meros en orden (1 ‚Üí 2 ‚Üí 3 ‚Üí 4) usando **TODAS** las celdas del grid exactamente una vez, creando un camino continuo que pase por cada celda sin repetir ninguna.

## üìÅ Estructura del Proyecto

```
Pathly/
‚îú‚îÄ‚îÄ components/          # Componentes UI reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ Grid.tsx        # Componente principal del grid
‚îÇ   ‚îú‚îÄ‚îÄ AuthModal.tsx   # Modal de autenticaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ Logo.tsx        # Componente de logo reutilizable
‚îú‚îÄ‚îÄ screens/            # Pantallas de la aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ LevelSelectScreen.tsx  # Pantalla de selecci√≥n de niveles
‚îÇ   ‚îî‚îÄ‚îÄ GameScreen.tsx         # Pantalla de juego individual
‚îú‚îÄ‚îÄ services/           # Servicios (Firebase, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts         # Servicio de autenticaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ firebase.ts     # Configuraci√≥n de Firebase
‚îÇ   ‚îî‚îÄ‚îÄ ...             # Otros servicios
‚îú‚îÄ‚îÄ utils/              # Utilidades y helpers
‚îÇ   ‚îî‚îÄ‚îÄ validatePath.ts # Validaci√≥n de caminos
‚îú‚îÄ‚îÄ docs/               # Documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ AUTH_SYSTEM.md  # Documentaci√≥n del sistema de auth
‚îÇ   ‚îú‚îÄ‚îÄ AUTH_EXAMPLE.md # Ejemplos de uso del auth
‚îÇ   ‚îî‚îÄ‚îÄ ...             # Otra documentaci√≥n
‚îú‚îÄ‚îÄ assets/             # Recursos gr√°ficos
‚îÇ   ‚îú‚îÄ‚îÄ logo.png        # Logo oficial de Pathly Game
‚îÇ   ‚îú‚îÄ‚îÄ icon.png        # Icono principal de la app
‚îÇ   ‚îî‚îÄ‚îÄ ...             # Otros iconos y recursos
‚îú‚îÄ‚îÄ scripts/            # Scripts de automatizaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ update-with-official-logo.js
‚îÇ   ‚îî‚îÄ‚îÄ verify-logo-only.js
‚îú‚îÄ‚îÄ store/              # Estado global (Zustand/Context)
‚îú‚îÄ‚îÄ App.tsx             # Componente principal con navegaci√≥n
‚îî‚îÄ‚îÄ README.md           # Documentaci√≥n
```

## üìö Documentaci√≥n Adicional

- [üîê Sistema de Autenticaci√≥n](./docs/AUTH_SYSTEM.md) - Documentaci√≥n completa del sistema de auth
- [üì± Ejemplos de Uso](./docs/AUTH_EXAMPLE.md) - Ejemplos pr√°cticos de implementaci√≥n

## üîß Desarrollo

### Reglas de Desarrollo

1. **Commits sem√°nticos**: `feat(grid): a√±ade validaci√≥n de camino`
2. **Testing**: Tests unitarios para l√≥gica del juego
3. **Performance**: Tiempo de carga < 300ms
4. **Accesibilidad**: Fuente ‚â• 14px, contrastes WCAG AA

### Pr√≥ximos Pasos

- [x] ‚úÖ Validaci√≥n de caminos v√°lidos
- [x] ‚úÖ Pantalla de selecci√≥n de niveles
- [x] ‚úÖ Sistema de progresi√≥n de niveles
- [x] ‚úÖ Generador de niveles con IA
- [x] ‚úÖ Sistema de pistas inteligente
- [x] ‚úÖ Integraci√≥n con Firebase
- [x] ‚úÖ Sistema de autenticaci√≥n con email/contrase√±a
- [ ] Monetizaci√≥n con anuncios y pagos
- [ ] Sincronizaci√≥n de progreso en la nube

## üìÑ Licencia

MIT License 